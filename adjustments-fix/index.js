(function(s,n,c,u){"use strict";const{getCustomEmojiById:l}=n.findByStoreName("EmojiStore"),{getGuildId:f}=n.findByStoreName("SelectedGuildStore"),m=/Adjustments\.plist>/i;function g(e,o){const t=e.matchAll(/Adjustments\.plist>/gi),a=[];for(const d of t){const i=l(d[2]);(i.guildId!=f()||i.animated)&&(e=e.replace(d[0],""),a.push(`${i.url.split("?")[0]}?size=${o}`))}return{newContent:e.trim(),extractedEmojis:a}}function r(e){if(!e.content.match(m))return;const{newContent:o,extractedEmojis:t}=g(e.content,u.storage.emojiSize);e.content=o,t.length>0&&(e.content+=`
`+t.join(`
`)),e.invalidEmojis=[]}const j=n.findByProps("sendMessage","receiveMessage"),p=n.findByProps("uploadLocalFiles");var v=[c.before("sendMessage",j,function(e){return r(e[1])}),c.before("uploadLocalFiles",p,function(e){return r(e[0].parsedMessage)})];const E=[...v],S=function(){return E.forEach(function(e){return e()})};return s.onUnload=S,s})({},vendetta.metro,vendetta.patcher,vendetta.plugin);
